<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Invitación XV Layla Naomi</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      color: white;
      background: url("img/Fountain_closeup_in_Orlando.jpg") no-repeat center center fixed;
      background-size: cover;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      text-align: center;
    }

    .container {
      max-width: 800px;
      padding: 20px;
      background-color: rgba(0, 0, 0, 0.7);
      border: 5px solid white;
      border-radius: 20px;
      margin-top: 20px;
    }

    h1, h2, h3, p {
      text-align: center;
    }

    .poem {
      font-style: italic;
      white-space: pre-line;
      margin: 20px 0;
    }

    .gallery {
      position: relative;
      width: 100%;
      max-width: 100%;
      aspect-ratio: 4 / 3;
      overflow: hidden;
      background-color: black;
    }

    .gallery img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      opacity: 0;
      transition: opacity 1s ease;
    }

    .gallery img.active {
      opacity: 1;
      z-index: 1;
    }

    form {
      text-align: center;
      margin-top: 20px;
    }

    label, input {
      display: block;
      margin: 5px auto;
      color: #FFD700;
    }

    button {
      background-color: white;
      color: black;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 10px;
    }

    button:hover {
      background-color: #ddd;
    }

    #imagen-generada {
      max-width: 100%;
      height: auto;
      display: none;
      margin: 20px auto;
      border: 3px solid white;
      border-radius: 10px;
    }

    #descargarBtn {
      display: none;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
</head>
<body>

  <div class="container">
    <h1>Para Mis XV</h1>
    <p>Celebramos más que un cumpleaños; celebramos el inicio de un hermoso viaje. Que cada paso que des, cada sueño que sigas y cada sonrisa que regales iluminen tu camino.</p>
    <h2>Layla Naomi Posadas Trejo</h2>

    <h3>Poema especial</h3>
    <p class="poem">
Lila de primavera. 

En esta noche de luz y estrellas,
brilla una flor entre las doncellas.
Cabello negro como la noche callada,
ojos cafés, miel de alborada.

Tu sonrisa es calma, suave ternura,
dulce reflejo de alma pura.
Quienes te aman,  te visten de sueños,
de pasos nuevos y anhelos pequeños.

Como el jazmín que al viento se mece,
tu corazón con dulzura florece.
No hay diamante que más reluzca
que tu mirada serena y dulce.

Hoy danzas al ritmo del tiempo,
dejando atrás el inocente cuento.
Y aunque la niña ya empieza a volar,
tu esencia dulce sabrá siempre estar.

Que el camino se tiña de auroras,
que te acompañen las horas más doradas.
Hoy celebramos tu vida en flor,
quince años de gracia, belleza y amor.
    </p>

  <h3>Galería de fotos</h3>
    <div class="gallery" id="carousel">
      <img src="img/IMG-20250507-WA0008.jpg" class="active">
      <img src="img/IMG-20250505-WA0009.jpg">
      <img src="img/IMG-20250505-WA0017.jpg">
      <img src="img/IMG-20250505-WA0002.jpg">
      <img src="img/IMG-20250505-WA0003.jpg">
      <img src="img/IMG-20250505-WA0004.jpg">
      <img src="img/IMG-20250505-WA0005.jpg">
      <img src="img/IMG-20250505-WA0006.jpg">
      <img src="img/IMG-20250505-WA0007.jpg">
      <img src="img/IMG-20250505-WA0010.jpg">
      <img src="img/IMG-20250505-WA0011.jpg">
      <img src="img/IMG-20250505-WA0012.jpg">
      <img src="img/IMG-20250505-WA0013.jpg">
      <img src="img/IMG-20250505-WA0016.jpg">
      <img src="img/IMG-20250505-WA0015.jpg">
      <img src="img/IMG-20250505-WA0018.jpg">
      <img src="img/IMG-20250505-WA0019.jpg">
      <img src="img/IMG-20250505-WA0020.jpg">
      <img src="img/IMG-20260606-WA0006.jpg">
      <img src="img/IMG-20260707-WA0007.jpg">
    </div>


    <h3>Confirmación de asistencia</h3>
    <form onsubmit="mostrarBoletos(event)">
      <label for="nombre">Nombre del invitado:</label>
      <input type="text" id="nombre" name="nombre" required>
      <button type="submit">Consultar boletos</button>
    </form>
    <p id="resultado"></p>
  </div>

  <img id="imagen-generada" alt="Invitación generada">
  <a id="descargarBtn" download="invitacion.png"><button>Descargar Invitación</button></a>

  <script>
    // Lista de invitados con boletos asignados
    const invitados = {
      "Andrea Pérez": 2,
      "Carlos García": 4,
      "Lucía Mendoza": 3,
      "Fernando López": 1,
      "Maria Torres": 2,
      "Saul Aguilera": 3,
      "Ismael Aguilera": 7,
      "Moises Mancada": 1,
      "Alejandro Templos": 3,
      "Valerio Menolez": 8,
      "Gilberto Soriano": 6,
      "Carlos Posadas": 5,
      "Marco Terrazas": 2,
      "Mario Aguilera": 6,
      "Davi Arollo": 4,
      "Humberto Arrollo": 5,
      "Manuel Hernandez": 8,
      "Fabian Hernadez": 5,
      "Berenice Ortega": 2,
      "Juan Ortega": 3,
      "Erick Ortega": 3,
      "Maria Domiguez":	3,
      "Isac Trejo": 4,
      "Mario Trejo": 5,
      "Miguel Angel Trejo":	3,
      "Jesus Trejo": 3,
      "Carmen Trejo": 2,
      "Isabel Trejo": 3,
      "Victor Garcia Trejo": 2,
      "Fernanda": 4,
      "Diana Moreno": 3,
      "Esmeralda Moreno": 3,
      "Guillermo Marin": 2,
      "Nelly Ramirez": 3,
      "Isaias Mrtinez":	2,
      "Sonia Cruz": 3,
      "Isabel Diaz": 3,
      "Areli Herrera Gonszales": 7,
      "Sandra Castro Vazques": 3,
      "Cristina Arellano Delgado": 3,
      "Sara Malfabon":	3,
      "Alejandro Estrella": 4,
      "Victor": 1,
      "Jorge":	6,
      "Alfredo Pachuca": 2,
      "Samuel Herrera":	6,
      "Francisco Salgado": 	2,
      "Marcelo Valverde": 2,
      "Israel vonilla": 2,
      "Fredy Toledano": 2,
      "Gibran Jimenez":	2,
      "Kevin Jimenez": 	2,
      "Pamela Jimenez":	2,
      "Daniel Jimenez":	2,
      "Victor Parrazal": 2,
      "Natis": 	2,
      "Joshua": 2,
      "Lidia": 	2,
      "Emanuel": 2,
      "zoe": 2,
      "Pamela": 2,
      "Yael": 5,
      "Lis": 2,
      "Alan": 2,
      "Edwin": 5,
    };


    function mostrarBoletos(event) {
      event.preventDefault();
      const nombre = document.getElementById("nombre").value.trim();
      const resultado = document.getElementById("resultado");
      const imagenGenerada = document.getElementById("imagen-generada");
      const descargarBtn = document.getElementById("descargarBtn");

      if (invitados[nombre]) {
        const boletos = invitados[nombre];
        resultado.textContent = `${nombre}, se te han asignado ${boletos} boleto(s).`;

        // Canvas en memoria
        const canvas = document.createElement("canvas");
        canvas.width = 600;
        canvas.height = 400;
        const ctx = canvas.getContext("2d");

        const imagen = new Image();
        imagen.src = 'invitaciones/plantilla.png';
        imagen.onload = function () {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.drawImage(imagen, 0, 0, canvas.width, canvas.height);

          ctx.fillStyle = "white";
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";
          ctx.font = "24px Arial";
          const textoY = canvas.height - 150;
          ctx.fillText(`${nombre}`, canvas.width / 2, textoY - 20);
          ctx.fillText(`y Familia`, canvas.width / 2, textoY + 20);
          ctx.fillText(`Boletos: ${boletos}`, canvas.width / 2, textoY + 45);

          const qrSize = 60;
          const espacio = 220;
          const x0 = (canvas.width - (qrSize * 2 + espacio)) / 2;
          const y0 = canvas.height - qrSize - 10;

          QRCode.toDataURL('https://maps.google.com/?q=misa', (err, url1) => {
            if (!err) {
              const qr1 = new Image();
              qr1.src = url1;
              qr1.onload = () => ctx.drawImage(qr1, x0, y0, qrSize, qrSize);
            }
          });

          QRCode.toDataURL('https://maps.google.com/?q=recepcion', (err, url2) => {
            if (!err) {
              const qr2 = new Image();
              qr2.src = url2;
              qr2.onload = () => {
                ctx.drawImage(qr2, x0 + qrSize + espacio, y0, qrSize, qrSize);
                const dataURL = canvas.toDataURL("image/png");
                imagenGenerada.src = dataURL;
                imagenGenerada.style.display = "block";
                descargarBtn.href = dataURL;
                descargarBtn.style.display = "inline-block";
                mostrarSoloInvitacion();
              };
            }
          });
        };
      } else {
        resultado.textContent = `Lo sentimos, ${nombre} no está en la lista.`;
        imagenGenerada.style.display = "none";
        descargarBtn.style.display = "none";
      }
    }

    function mostrarSoloInvitacion() {
      document.body.querySelectorAll("*").forEach(el => {
        if (!['imagen-generada', 'descargarBtn'].includes(el.id)) {
          el.style.display = "none";
        }
      });
      document.getElementById("imagen-generada").style.display = "block";
      document.getElementById("descargarBtn").style.display = "block";
    }

    // Galería automática
    let index = 0;
    const images = document.querySelectorAll('#carousel img');
    setInterval(() => {
      images.forEach(img => img.classList.remove('active'));
      index = (index + 1) % images.length;
      images[index].classList.add('active');
    }, 3000);
  </script>
</body>
</html>
