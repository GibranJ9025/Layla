<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Invitaci칩n XV Layla Naomi</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      color: white;
      background: url("img/Fountain_closeup_in_Orlando.jpg") no-repeat center center fixed;
      background-size: cover;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      text-align: center;
    }

    .container {
      max-width: 800px;
      padding: 20px;
      background-color: rgba(0, 0, 0, 0.7);
      border: 5px solid white;
      border-radius: 20px;
      margin-top: 20px;
    }

    h1, h2, h3, p {
      text-align: center;
    }

    #contador {
      font-size: 1.5rem;
      font-weight: bold;
      margin: 20px;
      color: #FFD700;
    }

    .poem {
      font-style: italic;
      white-space: pre-line;
      margin: 20px 0;
    }

    /* GALER칈A RESPONSIVA */
    .gallery {
      position: relative;
      width: 100%;
      max-width: 100%;
      aspect-ratio: 4 / 3; /* Mantiene proporci칩n 4:3 */
      overflow: hidden;
      background-color: black; /* para que se vea el 치rea si imagen no carga */
    }

    .gallery img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain; /* evita recortes, muestra completa */
      opacity: 0;
      transition: opacity 1s ease;
      background-color: black; /* para evitar bordes blancos */
    }

    .gallery img.active {
      opacity: 1;
      z-index: 1;
    }

    form {
      text-align: center;
      margin-top: 20px;
    }

    label, input {
      display: block;
      margin: 5px auto;
      color: #D70929;
    }

    button {
      background-color: white;
      color: black;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 10px;
    }

    button:hover {
      background-color: #ddd;
    }

    .map-link {
      text-align: center;
      margin: 10px 0;
    }

    .map-link a {
      color: #aaf;
      text-decoration: underline;
    }

    canvas {
      display: none;
      margin: 20px auto;
    }

    /* Imagen generada para descargar */
    #imagen-generada {
      max-width: 100%;
      height: auto;
      display: none;
      margin: 20px auto;
      border: 3px solid white;
      border-radius: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- Bot칩n para iniciar m칰sica -->
  <button id="musicaBtn" onclick="iniciarMusica()">游꿧 Reproducir m칰sica</button>
  
  <div id="contador"></div>

  <div class="container">
    <h1>Para Mis XV</h1>
    <p>Celebramos m치s que un cumplea침os; celebramos el inicio de un hermoso viaje...</p>
    <h2>Layla Naomi Posadas Trejo</h2>

    <h3>Por parte de:</h3>
    <p>Jos칠 Miguel Posadas Dom칤nguez</p>
    <p>Lizbeth Trejo Contreras</p>
    <h3>Nos complace invitarlos a la celebraci칩n del cumplea침os n칰mero 15 de nuestra hija</h3>

    <h3>Poema especial para conmemorar</h3>
    <p class="poem">
Lila de primavera.

En esta noche de luz y estrellas,
brilla una flor entre las doncellas.
Cabello negro como la noche callada,
ojos caf칠s, miel de alborada.

Tu sonrisa es calma, suave ternura,
dulce reflejo de alma pura.
Quienes te aman, te visten de sue침os,
de pasos nuevos y anhelos peque침os.

Como el jazm칤n que al viento se mece,
tu coraz칩n con dulzura florece.
No hay diamante que m치s reluzca
que tu mirada serena y dulce.

Hoy danzas al ritmo del tiempo,
dejando atr치s el inocente cuento.
Y aunque la ni침a ya empieza a volar,
tu esencia dulce sabr치 siempre estar.

Que el camino se ti침a de auroras,
que te acompa침en las horas m치s doradas.
Hoy celebramos tu vida en flor,
quince a침os de gracia, belleza y amor.
    </p>

    <h3>Fecha del evento</h3>
    <p>19 de septiembre del 2025</p>

    <h3>Misa</h3>
    <p>Parroquia de San Jos칠 de Gracia<br>Calle 19, No. 2, Col. Jos칠 L칩pez Portillo, Iztapalapa</p>
    <p>Hora: 17:40 hrs</p>
    <div class="map-link">
      <a href="https://www.google.com/maps/place/Calle+19+No+2+Jose+Lopez+Portillo+Iztapalapa" target="_blank" rel="noopener noreferrer">Ver en Google Maps</a>
    </div>

    <h3>Recepci칩n</h3>
    <p>Sal칩n Majestic<br>Av. Benito Ju치rez No. 190, Col. Francisco Villa, Iztapalapa</p>
    <p>Hora: de 19:30 hrs a 20:00 hrs</p>
    <div class="map-link">
      <a href="https://www.google.com/maps/place/Av.+Benito+Ju치rez+190+Francisco+Villa+Iztapalapa" target="_blank" rel="noopener noreferrer">Ver en Google Maps</a>
    </div>

    <h3>C칩digo de vestimenta</h3>
    <p>Formal</p>

    <h3>Galer칤a de fotos</h3>
    <div class="gallery" id="carousel">
      <img src="img/IMG-20250507-WA0008.jpg" class="active" alt="Foto 1">
      <img src="img/IMG-20250505-WA0009.jpg" alt="Foto 2">
      <img src="img/IMG-20250505-WA0017.jpg" alt="Foto 3">
      <img src="img/IMG-20250505-WA0002.jpg" alt="Foto 4">
      <img src="img/IMG-20250505-WA0003.jpg" alt="Foto 5">
      <img src="img/IMG-20250505-WA0004.jpg" alt="Foto 6">
      <img src="img/IMG-20250505-WA0005.jpg" alt="Foto 7">
      <img src="img/IMG-20250505-WA0006.jpg" alt="Foto 8">
      <img src="img/IMG-20250505-WA0007.jpg" alt="Foto 9">
      <img src="img/IMG-20250505-WA0010.jpg" alt="Foto 10">
      <img src="img/IMG-20250505-WA0011.jpg" alt="Foto 11">
      <img src="img/IMG-20250505-WA0012.jpg" alt="Foto 12">
      <img src="img/IMG-20250505-WA0013.jpg" alt="Foto 13">
      <img src="img/IMG-20250505-WA0016.jpg" alt="Foto 14">
      <img src="img/IMG-20250505-WA0015.jpg" alt="Foto 15">
      <img src="img/IMG-20250505-WA0018.jpg" alt="Foto 16">
      <img src="img/IMG-20250505-WA0019.jpg" alt="Foto 17">
      <img src="img/IMG-20250505-WA0020.jpg" alt="Foto 18">
      <img src="img/IMG-20260606-WA0006.jpg" alt="Foto 19">
      <img src="img/IMG-20260707-WA0007.jpg" alt="Foto 20">
    </div>

    <h3>Te esperamos</h3>
    <h3>Por favor confimar su asistencia enviando un mensaje de whatsap a</h3>
    <h3>Jose Miguel Posadas Domingues</h3>
    <h3>55 2201 4046</h3>
    <form onsubmit="mostrarBoletos(event)">
      <label for="nombre">Nombre del invitado:</label>
      <input type="text" id="nombre" name="nombre" required autocomplete="off" />
      <button type="submit">Consultar boletos</button>
    </form>
    <p id="resultado"></p>
  </div>

  <canvas id="boletoCanvas" width="600" height="400"></canvas>
  <img id="imagen-generada" alt="Boleto generado" title="Haz clic derecho para guardar la imagen">

  <!-- Audio oculto -->
  <audio id="musica" src="audio/Creep.mp3" preload="auto"></audio>
  
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script>
    // Lista de invitados con boletos asignados
    const invitados = {
      "Andrea P칠rez": 2,
      "Carlos Garc칤a": 4,
      "Luc칤a Mendoza": 3,
      "Fernando L칩pez": 1,
      "Maria Torres": 2,
      "Saul Aguilera": 3,
      "Ismael Aguilera": 7,
      "Moises Mancada": 1,
      "Alejandro Templos": 3,
      "Valerio Menolez": 8,
      "Gilberto Soriano": 6,
      "Carlos Posadas": 5,
      "Marco Terrazas": 2,
      "Mario Aguilera": 6,
      "Davi Arollo": 4,
      "Humberto Arrollo": 5,
      "Manuel Hernandez": 8,
      "Fabian Hernadez": 5,
      "Berenice Ortega": 2,
      "Juan Ortega": 3,
      "Erick Ortega": 3,
      "Maria Domiguez": 3,
      "Isac Trejo": 4,
      "Mario Trejo": 5,
      "Miguel Angel Trejo": 3,
      "Jesus Trejo": 3,
      "Carmen Trejo": 2,
      "Isabel Trejo": 3,
      "Victor Garcia Trejo": 2,
      "Fernanda": 4,
      "Diana Moreno": 3,
      "Esmeralda Moreno": 3,
      "Guillermo Marin": 2,
      "Nelly Ramirez": 3,
      "Isaias Mrtinez": 2,
      "Sonia Cruz": 3,
      "Isabel Diaz": 3,
      "Areli Herrera Gonszales": 7,
      "Sandra Castro Vazques": 3,
      "Cristina Arellano Delgado": 3,
      "Sara Malfabon": 3,
      "Alejandro Estrella": 4,
      "Victor": 1,
      "Jorge Perez Contreras": 6,
      "Alfredo Pachuca": 2,
      "Samuel Herrera": 6,
      "Francisco Salgado": 2,
      "Marcelo Valverde": 2,
      "Israel vonilla": 2,
      "Fredy Toledano": 2,
      "Gibran Jimenez": 2,
      "Kevin Jimenez": 2,
      "Pamela Jimenez": 2,
      "Daniel Jimenez": 2,
      "Victor Parrazal": 2,
      "Natis": 2,
      "Joshua": 2,
      "Lidia": 2,
      "Emanuel": 2,
      "zoe": 2,
      "Pamela": 2,
      "Yael": 5,
      "Lis": 2,
      "Alan": 2,
      "Edwin": 5,
    };

    // Funci칩n para mostrar boletos y generar boleto en canvas con QR
    function mostrarBoletos(event) {
      event.preventDefault();
      const nombre = document.getElementById("nombre").value.trim();
      const resultado = document.getElementById("resultado");
      const canvas = document.getElementById("boletoCanvas");
      const ctx = canvas.getContext("2d");
      const imgGenerada = document.getElementById("imagen-generada");

      if (invitados[nombre]) {
        const boletos = invitados[nombre];
        resultado.textContent = `${nombre}, se te han asignado ${boletos} boleto(s).`;

        const imagen = new Image();
        imagen.src = 'invitaciones/plantilla.png';
        imagen.onload = function () {
          canvas.style.display = "block";
          imgGenerada.style.display = "none";
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.drawImage(imagen, 0, 0, canvas.width, canvas.height);

          ctx.fillStyle = "white";
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";
          ctx.font = "24px Arial";
          const textoY = canvas.height - 150;
          ctx.fillText(`${nombre}`, canvas.width / 2, textoY - 20);
          ctx.fillText(`y Familia`, canvas.width / 2, textoY + 20);
          ctx.fillText(`Boletos: ${boletos}`, canvas.width / 2, textoY + 45);

          const qrSize = 60;
          const espacio = 220;
          const x0 = (canvas.width - (qrSize * 2 + espacio)) / 2;
          const y0 = canvas.height - qrSize - 10;

          // Generar primer QR
          QRCode.toDataURL('https://www.google.com/maps/place/Calle+19+No+2+Jose+Lopez+Portillo+Iztapalapa', (err, url1) => {
            if (err) {
              console.error(err);
              return;
            }
            const qr1 = new Image();
            qr1.src = url1;
            qr1.onload = () => {
              ctx.drawImage(qr1, x0, y0, qrSize, qrSize);

              // Generar segundo QR despu칠s del primero para evitar solapamientos
              QRCode.toDataURL('https://www.google.com/maps/place/Av.+Benito+Ju치rez+190+Francisco+Villa+Iztapalapa', (err, url2) => {
                if (err) {
                  console.error(err);
                  return;
                }
                const qr2 = new Image();
                qr2.src = url2;
                qr2.onload = () => {
                  ctx.drawImage(qr2, x0 + qrSize + espacio, y0, qrSize, qrSize);

                  // Una vez todo dibujado, convertir a imagen para descargar
                  setTimeout(() => {
                    const dataURL = canvas.toDataURL("image/png");
                    imgGenerada.src = dataURL;
                    imgGenerada.style.display = "block";
                    canvas.style.display = "none";
                  }, 300);
                };
              });
            };
          });
        };
      } else {
        resultado.textContent = `Lo sentimos, ${nombre} no est치 en la lista.`;
        canvas.style.display = "none";
        imgGenerada.style.display = "none";
      }
    }

    // Carrusel de im치genes
    let index = 0;
    const images = document.querySelectorAll('#carousel img');
    setInterval(() => {
      images.forEach(img => img.classList.remove('active'));
      index = (index + 1) % images.length;
      images[index].classList.add('active');
    }, 3000);

    // M칰sica
    const musica = document.getElementById('musica');
    const btnMusica = document.getElementById('musicaBtn');

    function iniciarMusica() {
      musica.play().then(() => {
        btnMusica.style.display = 'none';
      }).catch(e => {
        console.log("Interacci칩n requerida para iniciar m칰sica:", e);
      });
    }

    musica.addEventListener('ended', () => {
      setTimeout(() => {
        musica.currentTime = 0;
        musica.play();
      }, 2000);
    });

    // Contador regresivo
    const fechaObjetivo = new Date("2025-09-19T00:00:00").getTime();
    function actualizarContador() {
      const ahora = new Date().getTime();
      const diferencia = fechaObjetivo - ahora;
      if (diferencia < 0) {
        document.getElementById("contador").innerHTML = "춰Hoy es el gran d칤a!";
        clearInterval(intervaloContador);
        return;
      }
      const dias = Math.floor(diferencia / (1000 * 60 * 60 * 24));
      const horas = Math.floor((diferencia % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutos = Math.floor((diferencia % (1000 * 60 * 60)) / (1000 * 60));
      const segundos = Math.floor((diferencia % (1000 * 60)) / 1000);
      document.getElementById("contador").innerHTML = `${dias} d칤as, ${horas} horas, ${minutos} minutos, ${segundos} segundos`;
    }
    const intervaloContador = setInterval(actualizarContador, 1000);
    actualizarContador();
  </script>
</body>
</html>
